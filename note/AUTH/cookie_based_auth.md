# 토큰 기반 인증 (Token-Based Authentication)

토큰 기반 인증은 사용자가 애플리케이션에 로그인할 때 서버로부터 토큰을 발급받아 클라이언트 측에 저장하는 방식입니다. 이후 클라이언트는 요청을 보낼 때마다 이 토큰을 서버에 전달하여 인증을 수행합니다. 가장 널리 사용되는 토큰 형식 중 하나는 **JWT (JSON Web Token)**입니다.

### JWT (JSON Web Token) 개요
- **구조**: JWT는 `Header`, `Payload`, `Signature`로 구성된 3부분의 토큰입니다.
  - **Header**: 토큰의 타입(JWT)과 해싱 알고리즘(예: HMAC SHA256)을 정의합니다.
  - **Payload**: 사용자의 정보(예: 사용자 ID, 권한 등)와 같은 클레임을 포함합니다.
  - **Signature**: 토큰의 무결성을 검증하기 위해 사용됩니다. 헤더와 페이로드를 합친 뒤 비밀 키를 사용해 서명합니다.
  
### 작동 방식
1. **로그인 요청**: 사용자가 애플리케이션에 로그인하면, 서버는 사용자 자격 증명을 확인합니다.
2. **토큰 발행**: 자격 증명이 유효한 경우, 서버는 사용자 정보를 포함한 JWT를 생성하여 클라이언트에 전달합니다.
3. **요청 시 토큰 사용**: 클라이언트는 이후 요청마다 JWT를 HTTP 헤더(`Authorization: Bearer <token>`)에 포함시켜 서버로 전송합니다.
4. **토큰 검증**: 서버는 서명을 통해 토큰의 무결성과 유효성을 확인하고, 클라이언트의 요청을 처리합니다.

### 장점
1. **확장성**: 서버가 세션 상태를 유지할 필요가 없으므로, 많은 사용자와 요청을 효율적으로 처리할 수 있습니다.
2. **보안성**: 클라이언트에서만 토큰을 저장하고, 서버는 토큰의 무결성만을 검증하므로 비교적 안전합니다.
3. **표준성**: JWT는 JSON 포맷을 사용하므로 언어와 플랫폼에 상관없이 쉽게 사용할 수 있습니다.

### 단점
1. **토큰 탈취 위험**: 토큰이 탈취되면 만료되기 전까지 재사용될 수 있습니다.
2. **갱신 복잡성**: 토큰이 만료되면 클라이언트는 새 토큰을 받아야 하며, 갱신(refresh) 메커니즘을 따로 구현해야 합니다.
3. **토큰 크기**: JWT는 사용자 정보와 서명을 포함하므로, 다른 인증 방식보다 데이터 크기가 커질 수 있습니다.

### 예제
1. 사용자가 로그인: 클라이언트가 사용자명과 비밀번호를 서버에 전송.
2. 서버가 자격 증명을 검증하고 JWT 발행: 클라이언트는 이 JWT를 저장.
3. 클라이언트는 이후 모든 요청에 JWT를 포함: 서버는 JWT의 서명을 검증하여 요청을 처리.

